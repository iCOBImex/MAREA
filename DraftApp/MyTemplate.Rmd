---
output: 
    html_document: 
      fig_caption: yes
      number_sections: yes
      toc: yes
      toc_float:
        collapsed: no
        smooth_scroll: no
params:
  title: ""
  results_bio: ""
  results_bio_i: ""
  results_soc: ""
---

---
title: `r params$title`
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = F, fig.height = 3, warning = F, message = F, results = 'asis')

```

```{r cargar paquetes}

suppressPackageStartupMessages({
  library(tidyverse)
  library(MPAtools)
  library(stargazer)
})

```

<style type="text/css">
.table {

width: 80%;

}
</style>

*Este documento fue generado por el paquete [`MPAtools`](https://github.com/turfeffect/MPAtools), uno de los entregables del grupo [TURFeffect](www.turfeffect.org). Los resultados presentados son una version preliminar del software que se esta desarrollando, y no recomendamos la toma de decisiones basado en la informacion aqui presentada*

*Acentos y caracteres especiales omitidos*

# Resumen

<center>

**Leyenda**

----

![](legend2.gif)

----

</center>

```{r}

results_bio <- params$results_bio

if(is.null(params$results_bio_i)){
  results_bio_i <- tibble::tibble(
    Ind = c("Shannon", "Riqueza", "Densidad", "DensidadObj"),
    e = NA,
    p = NA,
    string = NA,
    color = NA,
    model = list(NA),
    plot = list(NA)
  )
} else {
  results_bio_i <- params$results_bio_i}

if(is.null(params$results_soc)){
  results_soc <- tibble::tibble(
    Ind = LETTERS[1:4],
    e = NA,
    p = NA,
    string = NA,
    color = NA,
    model = list(NA),
    plot = list(NA)
  )
} else {
  results_soc <- params$results_soc}
  
```


```{r, results = 'asis'}
rbind(results_bio, results_bio_i, results_soc) %>%
  filter(!is.na(color)) %>% 
  mutate(Puntaje = paste0("![](",color, ".jpg)")) %>%
  select(Indicador = Ind,
         Puntaje) %>%
  knitr::kable()

```


<center>


# Ecologicos

## Peces

### Indice de diversidad de Shannon


```{r}
if(!is.na(results_bio$plot[[1]])) {
  results_bio$plot[[1]]
}

```

```{r, results = 'asis'}
if(!is.na(results_bio$model[[1]])){
  results_bio$model[[1]] %>% 
    stargazer(
      dep.var.labels = "Shannon (H'/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```


### Riqueza

```{r}

if(!is.na(results_bio$plot[[2]])) {
  results_bio$plot[[2]]
}
```

```{r, results = 'asis'}

if(!is.na(results_bio$model[[2]])) {
  results_bio$model[[2]] %>%
    stargazer(
      dep.var.labels = "Riqueza (Spp/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```


### Organismos > LT_50

```{r}

if(!is.na(results_bio$plot[[3]])) {
  results_bio$plot[[3]]
}
```

```{r, results = 'asis'}

if(!is.na(results_bio$model[[3]])) {
  results_bio$model[[3]] %>%
    stargazer(
      dep.var.labels = "Organismos > LT_50",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```

### Densidad

```{r}
if(!is.na(results_bio$plot[[4]])) {
  results_bio$plot[[4]]
}

```

```{r, results = 'asis'}

if(!is.na(results_bio$model[[4]])) {
  results_bio$model[[4]] %>%
    stargazer(
      dep.var.labels = "Densidad (Organismos/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```


### Densidad de especies objetivo

```{r}
if(!is.na(results_bio$plot[[5]])) {
  results_bio$plot[[5]]
}

```

```{r, results = 'asis'}

if(!is.na(results_bio$model[[5]])) {
  results_bio$model[[5]] %>%
    stargazer(
      dep.var.labels = "Densidad (Organismos/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```

### Nivel trofico

```{r}
if(!is.na(results_bio$plot[[6]])){
  results_bio$plot[[6]]
}

```

```{r, results = 'asis'}
if(!is.na(results_bio$model[[6]])) {
  results_bio$model[[6]] %>% 
    stargazer(
      dep.var.labels = "Nivel trofico",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
  }

```

### Biomasa

```{r}

if (!is.na(results_bio$plot[[7]])) {
results_bio$plot[[7]]
}

```

```{r, results = 'asis'}
if(!is.na(results_bio$model[[7]])) {
  results_bio$model[[7]] %>%
    stargazer(
      dep.var.labels = "Biomasa (Kg/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```

### Biomasa de especies objetivo

## Invertebrados

### Indice de diversidad de Shannon

```{r}
if(!is.na(results_bio_i$plot[[1]])) {
  results_bio_i$plot[[1]]
}

```

```{r, results = 'asis'}
if(!is.na(results_bio_i$model[[1]])){
  results_bio_i$model[[1]] %>% 
    stargazer(
      dep.var.labels = "Shannon (H'/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```


### Riqueza

```{r}

if(!is.na(results_bio_i$plot[[2]])) {
  results_bio_i$plot[[2]]
}
```

```{r, results = 'asis'}

if(!is.na(results_bio_i$model[[2]])) {
  results_bio_i$model[[2]] %>%
    stargazer(
      dep.var.labels = "Riqueza (Spp/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```


### Densidad

```{r}
if(!is.na(results_bio_i$plot[[3]])) {
  results_bio_i$plot[[3]]
}

```

```{r, results = 'asis'}

if(!is.na(results_bio_i$model[[3]])) {
  results_bio_i$model[[3]] %>%
    stargazer(
      dep.var.labels = "Densidad (Organismos/transecto)",
      type = "html",
      dep.var.caption = "",
      report = "vc*",
      single.row = T,
      omit.stat = c("adj.rsq", "n"),
      digits = 2,
      df = F,
      notes = "+p < 0.1, ++p<0.05, +++p<0.001",
      notes.append = FALSE,
      star.char = "+"
    )
}

```


# Socioeconomicos

## Arribos

